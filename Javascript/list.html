<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link href="css/detail.css" rel="stylesheet" />
    <script
      src="https://code.jquery.com/jquery-3.6.3.min.js"
      integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <!-- <div class="col-sm-4">
          <img src="https://via.placeholder.com/600" class="w-100">
          <h5>Card title</h5>
          <p>가격 : 70000</p>
        </div> -->
      </div>
    </div>

    <div class="container mb-3">
      <button class="btn btn-danger" id="price">가격순 정렬</button>
    </div>

    <div class="container mb-3">
      <button class="btn btn-danger" id="korean">다나가순 정렬</button>
    </div>

    <div class="container mb-3">
      <button class="btn btn-danger" id="six">6만원 이하 상품</button>
    </div>

    <script>
      var products = [
        { id: 0, price: 70000, title: "Blossom Dress" },
        { id: 1, price: 50000, title: "Springfield Shirt" },
        { id: 2, price: 60000, title: "Black Monastery" },
      ];

      $("#price").click(function () {
        products.sort(function (a, b) {
          return a.price - b.price;
        });

        $(".row").html("");

        products.forEach((a, i) => {
          var card = `<div class="col-sm-4">
          <img src="https://via.placeholder.com/600" class="w-100">
          <h5>${products[i].title}</h5>
          <p>가격 : ${products[i].price}</p>
          <button class="buy">구매</button>
        </div>`;
          $(".row").append(card);
        });
      });

      $("#korean").click(function () {
        products.sort(function (a, b) {
          if (a.title < b.title) {
            return 1;
          } else {
            return -1;
          }
        });

        $(".row").html("");

        products.forEach((a, i) => {
          var card = `<div class="col-sm-4">
          <img src="https://via.placeholder.com/600" class="w-100">
          <h5>${products[i].title}</h5>
          <p>가격 : ${products[i].price}</p>
          <button class="buy">구매</button>
        </div>`;
          $(".row").append(card);
        });
      });

      $("#six").click(function () {
        var newproducts = products.filter(function (a) {
          return a.price <= 60000;
        });

        $(".row").html("");

        newproducts.forEach((a, i) => {
          var card = `<div class="col-sm-4">
          <img src="https://via.placeholder.com/600" class="w-100">
          <h5>${newproducts[i].title}</h5>
          <p>가격 : ${newproducts[i].price}</p>
          <button class="buy">구매</button>
        </div>`;
          $(".row").append(card);
        });
      });

      var array = [7, 3, 5, 2, 40];

      // var newarray = array.map(function(a) { // array 자료 전부 변형하려면
      //   return a * 1000;
      // })

      // var newarray = array.filter(function(a) { // filter() 결과는 변수에 저장해서 써야함
      //   return a < 4
      // }); // array 자료 원하는것만 골라 내려면

      // var array2 = ['a', 'c', 'b'];
      // array2.sort(); // 정렬
      // array2.sort(function(a,b) {
      //   return b-a;
      // }) // 역순 정렬
      // array.sort(function(a,b) {
      //   return a-b; // 오름차순
      //   // return b-a; // 내림차순
      // }) // array 숫자 정렬
      // array.sort(); // array 문자 정렬

      products.forEach((a, i) => {
        var card = `<div class="col-sm-4">
          <img src="https://via.placeholder.com/600" class="w-100">
          <h5>${products[i].title}</h5>
          <p>가격 : ${products[i].price}</p>
          <button class="buy">구매</button>
        </div>`;
        $(".row").append(card);
      });
      // for (let i = 0; i < products.length; i++) {
      //     document.querySelectorAll('.card-body h5')[i].innerHTML = products[i].title;
      //     document.querySelectorAll('.card-body p')[i].innerHTML = '가격 : ' + products[i].price;
      // }
    </script>

    <div class="container">
      <button class="btn btn-danger moer_btn" id="more">더보기</button>
    </div>

    <script>
      var count = 0;
      $("#more").click(function () {
        count += 1;
        if (count == 1) {
          $.get("https://codingapple1.github.io/js/more1.json").done(
            (data1) => {
              data1.forEach((a, i) => {
                var card = `<div class="col-sm-4">
              <img src="https://via.placeholder.com/600" class="w-100">
              <h5>${data1[i].title}</h5>
              <p>가격 : ${data1[i].price}</p>
          <button class="buy">구매</button>
            </div>`;
                $(".row").append(card);
              });
            }
          );
        } else if (count == 2) {
          $.get("https://codingapple1.github.io/js/more2.json").done(
            (data2) => {
              data2.forEach((a, i) => {
                var card = `<div class="col-sm-4">
              <img src="https://via.placeholder.com/600" class="w-100">
              <h5>${data2[i].title}</h5>
              <p>가격 : ${data2[i].price}</p>
          <button class="buy">구매</button>
            </div>`;
                $(".row").append(card);
              });
            }
          );
        }
      });
    </script>
    <!-- <div class="card-group container">
        <div class="card">
            <img src="https://via.placeholder.com/600">
            <div class="card-body">
                <h5>Card title</h5>
                <p>가격 : 70000</p>
                <button class="btn btn-danger">주문하기</button>
            </div>
        </div>
        <div class="card">
            <img src="https://via.placeholder.com/600">
            <div class="card-body">
                <h5>Card title</h5>
                <p>가격 : 70000</p>
                <button class="btn btn-danger">주문하기</button>
            </div>
        </div>
        <div class="card">
            <img src="https://via.placeholder.com/600">
            <div class="card-body">
                <h5>Card title</h5>
                <p>가격 : 70000</p>
                <button class="btn btn-danger">주문하기</button>
            </div>
        </div>
    </div> -->
    <!-- <form action="url" method="post"> 서버에 데이터 보내주는 방법 / GET/POST 요청하면 브라우저 새로고침됨

    </form> -->
    <!-- ajax가 새로고침없이 GET,POST 요청하는 기능 -->
    <!-- <script>
      // $.get('https://codingapple1.github.io/hello.txt').done(function(data) { // ajax로 GET 요청하는 법
      //   console.log(data)
      // }).fail(function() { // ajax 실패시 특정 코드 실행하고 싶으면
      //   console.log('실패함')
      // })
      // $.post('https://codingapple1.github.io/hello.txt', {name : 'kim'}).done(data) {
      //   console.log(data)
      // }

      // $.get('https://codingapple1.github.io/price.json').done(function(data) {
      //   console.log(data.price);
      // })

      // fetch('https://codingapple1.github.io/price.json')
      // .then(res => res.json())
      // .then(data => {
      //   console.log(data)
      // })
      // .catch(error => {  
      //   consooe.log(err)
      // })
    </script> -->
    <script>
      // localStorange, sessionStorage는 이름 : 값 형태로 저장가능 용량은 5MB 문자/숫자만 저장가능
      // localStorage는 사이트 재접속해도 유지 / sessionStorage는 사이트나가면 자동 삭제      // IndexedDB는 구조화된 대용량데이터 저장 시
      // Cookies는 보통 로그인정보 저장
      // Cache Storage는 html, css, js 파일 저장하는 곳

      // localStorage.setItem('bomin', 'kang') // 저장하려면
      // localStorage.getItem('bomin'); // 출력하려면
      // localStorage.removeItem('bomin'); // 삭제하려면

      // var arr = [1,2,3] // array/object -> JSON으로 바꾸면 저장가능
      // var newArr = JSON.stringify(arr); // array.object -> JSON은 JSON.stringify()

      // localStorage.setItem('num', newArr); // array, object 저장하려면
      // var out = localStorage.getItem('num');
      // JSON.parse(out); // JSON => array, object는 JOSN.parse()
      // console.log(out);

      $(".buy").click(function (e) {
        var title = $(e.target).siblings("h5").text(); // 형제요소 가져올 수 있음

        if(localStorage.getItem('cart') != null) {
          var 꺼낸거 = JSON.parse(localStorage.cart);
          꺼낸거.push(title);
          localStorage.setItem('cart', JSON.stringify(꺼낸거));
        } else {
          localStorage.setItem("cart", JSON.stringify([title]));
        }
      });
    </script>
  </body>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"
  ></script>
</html>
