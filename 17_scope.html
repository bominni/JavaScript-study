<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
</head>
<body>
  <h1>9_scope.html</h1> 
  <script>
    // 스코프(scope): 식별자(함수나 변수의 이름)를 찾아내기 위한 규칙
    // -> 어떤 이름을 사용할 수 있는 유효 범위를 말한다.

    // 스코프의 종류
    // 1. 전역 스코프: 코드 어디에서든지 참조할 수 있는 영역
    // 2. 지역 스코프 또는 함수 레벨 스코프: 함수 코드 블럭 안의 영역
    // 으로 함수 안에서만 참조할 수 있음
    // 3. 블록 레벨 스코프: 제어문을 사용하여 생성된 중괄호 영역

    //
    // 전역 스코프
    //
    var x = "global"

    function foo() {
      //
      // 지역 스코프 또는 함수 레벨 스코프
      //
      var y = "local";  // 지역 변수
    }
    foo();
 
    if (true) {
      //
      // 블럭 레벨 스코프
      //
      var z = "world";
    }
    // console.log(x); // OK
    // console.log(y); // ERROR
    console.log(z);

    // 자바스크립트는 블럭 레벨 스코프를 지원하지 않으며 블록 레벨
    // 스코프 안에서 생성된 변수는 전역 변수로 해석됩니다.

    for (var i = 0; i < 2; i++) {
        // ...
    }
    console.log(i); // 전역 변수로 해석됩니다.

    // -------------------------------------------------
    // 변수 선언 시, var 키워드를 생략할 수 있습니다.
    var a = "a";
    b = "b";

    // 전역 스코프에서 변수 생성 시, var 키워드의 유무와 상관 없이
    // 모두 전역 변수로 해석됩니다.
    console.log(a);
    console.log(b);

    function foo() {
      z = "foo";
      var f = "f";
    }
    foo();
    console.log(z); // OK, 지역 스코프에서 var 키워드를 사용하지 않으면
                    // 이는 전역 변수로 해석됩니다.
    //console.log(f); // ERROR

    // 따라서 변수 선언 시, 가급적이면 var 키워드를 사용하여
    // 선언하는 것이 좋습니다.

    // --------------------------------------------------
    // let과 const

    // var 키워드를 사용하여 변수를 중복 선언할 수 있습니다.
    var age = 20;
    var age = 30;
    console.log(age); // ??

    // 자바스크립트에서는 변수를 선언하기 전에 이를 사용할 수 
    // 있습니다. 이는 자바스크립트가 선언된 변수 등을 파일의
    // 최상단으로 끌어올리기 때문이며 이를 호이스팅(hoisting)
    // 이라고 합니다.
    console.log(xyz);
    var xyz = 100;

    // 자바스크립트에서는 기존 변수의 문제점을 해결하기 위해
    // let 키워드를 도입합니다.
    // 변수 선언 방법: let 변수명 = 값;
    // let g = 0;
    // let g = 0;  // ERROR, 중복 선언이 안됩니다.

    // console.log(g); // ERROR, 변수 선언 전에 사용할 수 없습니다.
    // let g = 0;

    if (true) {
      var q = "q";
      let r = "r"; 
    }
    console.log(q);
    // console.log(r); // ERROR, 블록 레벨 스코프로 동작합니다.

    // 결론! 자바스크립트에서 변수를 선언하려면 var보다 let
    // 키워드를 사용하는 것이 좋습니다. 


    // 3. 반환값만 있는 경우
    const pi = 3.11
    // function pi() { return 3.14; }

    pi = 0;
  </script>
</body>
</html>